{% extends "layout.html" %}

{% block title %}
    Admin
{% endblock %}

{% block main %}

<div class="container colored-container">
    <div class="section">
        <h2>Van Identifications</h2>
    </div>

    <!-- Search bar placed above the table -->
    <input type="text" id="searchBar" placeholder="Search">

    <!-- Single table element containing the table -->
    <table id="vanTable" class="table table-bordered">
        <thead>
            <tr>
                <th>Van</th>
                <th>VIN Number</th>
            </tr>
        </thead>
        <tbody>
            {% for van in vans %}
                <tr data-id="{{ van.id }}">
                    <td>{{ van.van_code }}</td>
                    <td>{{ van.vin }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}


 <script>
    document.getElementById('searchBar').addEventListener('input', function() {
    // Get the query (convert it to uppercase for case-insensitive search)
    var query = this.value.toUpperCase();

    // Get the table rows
    var rows = document.getElementById('vanTable').getElementsByTagName('tbody')[0].getElementsByTagName('tr');

    // Loop through the rows
    for (var i = 0; i < rows.length; i++) {
        // Get the columns (cells) of the current row
        var cols = rows[i].getElementsByTagName('td');

        // Assume the row doesn't match the query
        var rowMatchesQuery = false;

        // Check the Van (1st), License Plate (2nd), and VIN Number (3rd) columns
        var columnsToCheck = [0, 1]; // adjust as per your table column order
        for (var j = 0; j < columnsToCheck.length; j++) {
            var cellText = cols[columnsToCheck[j]].innerText.toUpperCase();
            if (cellText.includes(query)) {
                // If cell text includes the query, this row matches
                rowMatchesQuery = true;
                break;
            }
        }

        // Show/hide the row depending on whether it matches the query
        rows[i].style.display = rowMatchesQuery ? '' : 'none';
    }
});

 </script>

{% endblock %}
